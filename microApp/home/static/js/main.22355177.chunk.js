!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("echarts"),require("AMap"),require("AMapUI")):"function"===typeof define&&define.amd?define(["echarts","AMap","AMapUI"],t):"object"===typeof exports?exports["home-main"]=t(require("echarts"),require("AMap"),require("AMapUI")):e["home-main"]=t(e.echarts,e.AMap,e.AMapUI)}(window,(function(e,t,a){return(window.webpackJsonp_home=window.webpackJsonp_home||[]).push([[0],{1088:function(e,t,a){"use strict";a.r(t),a.d(t,"bootstrap",(function(){return bt})),a.d(t,"mount",(function(){return ft})),a.d(t,"unmount",(function(){return xt}));var c=a(50),n=a.n(c),i=a(91),s=a(1),l=(a(507),a(0)),r=a(42),o=a.n(r),d=(a(511),a(696),a(331)),j=a(44),u=(a(697),a(497)),h=a.n(u),m=a(41),b=a(77),p=a(14),f=a(264),O=a(503),x=a(56),v=a(89),g=a.n(v),y=a(179),N=a.n(y),S=a(74),w=a.n(S),k=a(261),I=a(1091),T=a(502);function C(e){var t=new Date,a=function(e){var t=e;return 1===e.toString().length&&(t="0"+e),t},c=t.getTime()+864e5*e;t.setTime(c);var n=t.getFullYear(),i=t.getMonth(),s=t.getDate();return s=a(s),n+"-"+(i=a(i+1))+"-"+s}function L(e,t,a){return 0===a?{startTime:C(e),endTime:C(t)}:{startTime:C(e)+" 00:00:00",endTime:C(t)+" 23:59:59"}}var E=a(468),A=a.n(E),q=a(164),F=a(469),W={token:"",route:"",userId:"",setGlobalState:null,urlRecord:0,homeMoudle:0};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;if("token"===t.type){var a=Object.assign({},e);return a.token=t.value,a}if("route"===t.type){var c=Object.assign({},e);return c.route=t.value,c}if("userId"===t.type){var n=Object.assign({},e);return n.userId=t.value,n}if("globalState"===t.type){var i=Object.assign({},e);return i.setGlobalState=t.value,i}if("urlRecord"===t.type){var s=Object.assign({},e);return s.urlRecord=t.value,s}if("homeMoudle"===t.type){var l=Object.assign({},e);return l.homeMoudle=t.value,l}return e},z=Object(q.c)({homeReducer:_}),R=Object(q.e)(z,Object(q.d)(Object(q.a)(F.a))),M=a(470),D=a.n(M),P=A.a.create({timeout:6e4}),H="0000";D()(P,{retries:4,retryDelay:function(e){return 1e3*e},shouldResetTimeout:!0,retryCondition:function(e){return!!e.message.includes("timeout")}}),P.interceptors.request.use((function(e){return e.headers.Authorization="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJjbGllbnRpZCI6MTAwMDEsInRraSI6NTk5MzAzMjIzNzQ4MjAyNDk2LCJyb2xlaWQiOjIsInVzZXJ0eXBlIjowLCJsdHAiOiJicyIsInR5cGVpZCI6MTUwMSwiZXhwIjoxNjIzMDk0Njg4NzkxLCJ1c2VyaWQiOjM1Niwic2VydmVyaWQiOjQ3LCJ1c2VybmFtZSI6ImFkbWluIn0=.NjI2Njk2ZmE5YTA0MWE3MTA1NDIxMTY2NjUyMTc0Njg=",e}),(function(e){return Promise.reject(e)})),P.interceptors.response.use((function(e){var t=e.data;return t.code&&t.code!==H&&t.code>2e3?Promise.reject("error"):e}),(function(e){return e.response&&e.response.status&&e.response.status>=500?console.log("\u670d\u52a1\u5668\u65e0\u54cd\u5e94\uff0c\u8bf7\u786e\u8ba4\u670d\u52a1\u72b6\u6001\uff01"):e.message.toLowerCase().indexOf("network")>=0&&e.message.toLowerCase().indexOf("error")>=0?console.log("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u786e\u8ba4\uff01"):console.log("\u670d\u52a1\u5668\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),Promise.reject(e)}));var U=P;function B(){return U({url:"/video/home/vehicle/count",method:"get"})}function G(){return{videoCount:U({url:"/video/home/vehicle/video/count",method:"get"}),todayDaily:U({url:"/video/home/vehicle/today/daily",method:"get"}),addedCount:U({url:"/video/home/vehicle/month/added/count",method:"get"}),processedCount:U({url:"/video/home/alarm/today/processed/count",method:"get"}),todayCount:U({url:"/video/home/alarm/today/count",method:"get"}),clientCount:U({url:"/video/home/client/count",method:"get"}),vehicleOnline:U({url:"/video/home/vehicle/countOnlien",method:"get"}),adasCount:U({url:"/video/home/vehicle/adas/count",method:"get"}),onlineCount:U({url:"/video/home/vehicle/online",method:"get"})}}function V(){return U({url:"/video/home/alarm/today/analysis",method:"get"})}function J(){return U({url:"/video/monitor/getUserVehicleLngLat2",method:"post"})}function K(){return U({url:"/video/viewingtime/viewinglist",method:"post"})}function Y(e){return U({url:"/report/adas/queryRuleAlarmTypeCount",method:"post",data:e})}function Q(e){return U({url:"/video/datashow/public/ams/adas/month",method:"post",params:e})}function Z(e){return U({url:"/video/datashow/public/ams/adas/day",method:"post",params:e})}function X(e){return U({url:"/video/datashow/public/ams/alarm/month",method:"post",params:e})}function $(e){return U({url:"/video/datashow/public/ams/alarm/day",method:"post",params:e})}function ee(){return U({url:"/video/index/homepagemoduleselect",method:"post"})}function te(){return U({url:"/video/client/tree",method:"post"})}var ae=Object(l.createContext)();function ce(e){var t=document.querySelector("#"+e);t.innerHTML="";t.innerHTML=' <div style="position:relative;height:100%;width:100%;display:flex;justify-content: center;align-items: center;">\n                                <span style="font-size:16px;color:#666">\u6682\u65e0\u6570\u636e\uff01</span>  \n                    </div>  '}function ne(){var e=Object(l.useContext)(ae).data_mod,t=Object(l.useState)([]),a=Object(p.a)(t,2),c=a[0],r=a[1],o=Object(l.useState)("-"),d=Object(p.a)(o,2),j=d[0],u=d[1],h=Object(l.useState)("-"),m=Object(p.a)(h,2),b=m[0],f=m[1],O=Object(l.useState)("-"),x=Object(p.a)(O,2),v=x[0],g=x[1],y=Object(l.useState)("-"),N=Object(p.a)(y,2),S=N[0],w=N[1],k=Object(l.useState)("-"),I=Object(p.a)(k,2),T=I[0],C=I[1],L=Object(l.useState)("-"),E=Object(p.a)(L,2),A=E[0],q=E[1],F=Object(l.useState)("-"),W=Object(p.a)(F,2),_=W[0],z=W[1],R=Object(l.useState)("-"),M=Object(p.a)(R,2),D=M[0],P=M[1],H=Object(l.useState)("-"),U=Object(p.a)(H,2),V=U[0],J=U[1],K=Object(l.useState)("-"),Y=Object(p.a)(K,2),Q=Y[0],Z=Y[1];function X(){return(X=Object(i.a)(n.a.mark((function e(){var t,a,c,i,s,l,r,o,d,j,u,h,m,b,p,O,x;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=G(),a=t.videoCount,c=t.todayDaily,i=t.addedCount,s=t.processedCount,l=t.todayCount,r=t.clientCount,o=t.adasCount,d=t.onlineCount,e.next=3,a;case 3:return j=e.sent,e.next=6,c;case 6:return u=e.sent,e.next=9,i;case 9:return h=e.sent,e.next=12,s;case 12:return m=e.sent,e.next=15,l;case 15:return b=e.sent,e.next=18,r;case 18:return p=e.sent,e.next=21,o;case 21:return O=e.sent,e.next=24,d;case 24:(x=e.sent).data.data>0?f(x.data.data):f(0),O.data.data>0?C(O.data.data):C(0),j.data.data>0?g(j.data.data):g(0),u.data.data>0?P(u.data.data):P(0),h.data.data>0?q(h.data.data):q(0),b.data.data>0?z(b.data.data):z(0),m.data.data>0?J(m.data.data):J(0),p.data.data>0?w(p.data.data):w(0);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){B().then((function(e){"0000"===e.data.code?u(e.data.data):u("-")})).catch((function(e){u("-"),console.log(e)})),function(){X.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){_-V>0?Z(_-V):Z(0)}),[V,_]),Object(l.useEffect)((function(){0===e.length?r([1,2,3,4,5,6,7,8,9]):r(e)}),[e]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"sum-list",children:Object(s.jsxs)("ul",{children:[c&&c.indexOf(1)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-kehu"}),Object(s.jsx)("span",{children:"\u603b\u5ba2\u6237\u6570"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:S}),Object(s.jsx)("span",{className:"unit-span",children:"\u4e2a"})]})]})})}):Object(s.jsx)(s.Fragment,{}),c&&c.indexOf(2)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-zongji"}),Object(s.jsx)("span",{children:"\u603b\u8f66\u8f86"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:j}),Object(s.jsx)("span",{className:"unit-span",children:"\u8f86"})]})]})})}):Object(s.jsx)(s.Fragment,{}),c&&c.indexOf(3)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-online"}),Object(s.jsx)("span",{children:"\u5728\u7ebf\u8f66\u8f86"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:b}),Object(s.jsx)("span",{className:"unit-span",children:"\u8f86"})]})]})})}):Object(s.jsx)(s.Fragment,{}),c&&c.indexOf(4)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-zaixian"}),Object(s.jsx)("span",{children:"\u89c6\u9891\u8f66\u8f86"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:v}),Object(s.jsx)("span",{className:"unit-span",children:"\u8f86"})]})]})})}):Object(s.jsx)(s.Fragment,{}),c&&c.indexOf(5)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-adas"}),Object(s.jsx)("span",{children:"\u4e3b\u52a8\u5b89\u5168"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:T}),Object(s.jsx)("span",{className:"unit-span",children:"\u8f86"})]})]})})}):Object(s.jsx)(s.Fragment,{}),c&&c.indexOf(6)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-lixian"}),Object(s.jsx)("span",{children:"\u672c\u6708\u65b0\u589e"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:A}),Object(s.jsx)("span",{className:"unit-span",children:"\u8f86"})]})]})})}):Object(s.jsx)(s.Fragment,{}),c&&c.indexOf(7)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-baojing"}),Object(s.jsx)("span",{children:"\u4eca\u65e5\u62a5\u8b66"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:_}),Object(s.jsx)("span",{className:"unit-span",children:"\u6b21"})]})]})})}):Object(s.jsx)(s.Fragment,{}),c&&c.indexOf(8)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-weichuli"}),Object(s.jsx)("span",{children:"\u672a\u5904\u7406\u62a5\u8b66"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:Q}),Object(s.jsx)("span",{className:"unit-span",children:"\u6b21"})]})]})})}):Object(s.jsx)(s.Fragment,{}),c&&c.indexOf(9)>=0?Object(s.jsx)("li",{children:Object(s.jsx)("div",{className:"sum-block",children:Object(s.jsxs)("div",{className:"sumWrap",children:[Object(s.jsxs)("div",{className:"sum-text",children:[Object(s.jsx)("i",{className:"icon-sum icon-yichuli"}),Object(s.jsx)("span",{children:"\u4eca\u65e5\u884c\u9a76\u91cc\u7a0b"})]}),Object(s.jsxs)("span",{className:"total-num",children:[Object(s.jsx)("span",{children:D}),Object(s.jsx)("span",{className:"unit-span",children:"km"})]})]})})}):Object(s.jsx)(s.Fragment,{})]})})})}function ie(){var e=null;function t(){e=new g.a.Map("containers",{zoom:window.AREA_CODE.zIndex}),(new g.a.DistrictSearch).search(window.AREA_CODE.arcode,(function(t,a){var c;"complete"===t&&(c=Number(a.districtList[0].adcode),N.a.load(["ui/geo/DistrictExplorer","ui/geo/DistrictCluster","lib/$","ui/misc/PointSimplifier"],(function(t,a,n,i){window.DistrictCluster=a,function(t,a,c){var n=new t({map:e,zIndex:11,topAdcodes:[c],getPosition:function(e){return e},autoSetFitView:!1});window.distCluster=n,J().then((function(e){if(e&&"0000"===e.data.code){var t=e.data.data,a=[];t.forEach((function(e,t){var c=[];c.push(e.lng,e.lat),a.push(c)})),n.setData(a)}}))}(a,0,c)})))}))}return Object(l.useEffect)((function(){setTimeout((function(){t()}))}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here home-map-chart",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",style:{position:"absolute",zIndex:1e3},children:"\u8f66\u8f86\u5730\u56fe\u5206\u5e03"}),Object(s.jsx)("div",{className:"charts-play",style:{top:0},children:Object(s.jsx)("div",{className:"charts-paly-map-wrap",id:"containers"})})]})})})}function se(){var e={warnAnalysis:U({url:"/video/home/alarm/lately/count",method:"get"}),onlineAnalysis:U({url:"/video/home/online/lately/count",method:"get"})},t=e.warnAnalysis,a=e.onlineAnalysis;function c(e,t,a){var c={tooltip:{trigger:"axis"},grid:{containLabel:!0,left:15,top:30,right:15,bottom:5},color:["#ff6c40","#3da5f9"],legend:{data:["\u65e5\u5728\u7ebf\u6570","\u65e5\u62a5\u8b66\u6570"],icon:"circle",itemWidth:10,itemHeight:10,selectorItemGap:80,textStyle:{fontSize:12,padding:[4,10,0,0]},top:0},xAxis:{type:"category",data:e,splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#666"},axisTick:{alignWithLabel:!0,inside:!0}},yAxis:[{type:"value",position:"left",nameTextStyle:{color:"#ff6c40",align:"center",fontSize:12},splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#ff6c40"},axisTick:{alignWithLabel:!0,inside:!0}},{position:"right",type:"value",nameTextStyle:{color:"#3da5f9",align:"center",fontSize:12},splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#3da5f9"},axisTick:{alignWithLabel:!0,inside:!0}}],series:[{yAxisIndex:0,name:"\u65e5\u62a5\u8b66\u6570",data:t,type:"line"},{yAxisIndex:1,name:"\u65e5\u5728\u7ebf\u6570",data:a,type:"line"}]};w.a.init(document.querySelector("#onlineAndalarm")).setOption(c)}function r(){return(r=Object(i.a)(n.a.mark((function e(){var i,s,l,r,o,d,j,u,h,m,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return i=e.sent,e.next=5,a;case 5:if(s=e.sent,l=[],r=[],o=[],"0000"===i.data.code||"0000"===s.data.code||""!==i.data.data||""!==s.data.data){e.next=12;break}return ce("onlineAndalarm"),e.abrupt("return");case 12:d=s.data.data,""!==(j=i.data.data)&&void 0!==j&&(u=Object.keys(j).sort()).forEach((function(e){r.push(j[e])})),""!==d&&void 0!==d&&(h=Object.keys(d).sort()).forEach((function(e){o.push(d[e])})),u?(m=[],u.forEach((function(e){m.push(e.slice(5))})),l.push.apply(l,m)):h&&(p=[],h.forEach((function(e){p.push(e.slice(5))})),l.push.apply(l,Object(b.a)(h))),c(l,r,o);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){setTimeout((function(){!function(){r.apply(this,arguments)}()}),200)}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here home-curve-chart",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:"\u65e5\u5728\u7ebf\u7387\u53ca\u62a5\u8b66\u8d8b\u52bf\u7edf\u8ba1"}),Object(s.jsx)("div",{className:"charts-play",id:"onlineAndalarm"})]})})})}function le(){var e=Object(m.d)((function(e){return e.homeReducer.setGlobalState}));function t(e,t){var a=document.querySelector("#barAlarm")&&w.a.init(document.querySelector("#barAlarm")),c={color:["#2cd9c5"],grid:{containLabel:!0,left:15,top:10,right:15,bottom:5},xAxis:{type:"category",data:e,splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#333",fontSize:11,rotate:20},axisTick:{alignWithLabel:!0,inside:!0}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#333"},axisTick:{alignWithLabel:!0,inside:!0}},series:[{data:t,type:"bar",barWidth:25}]};a&&a.setOption(c)}function a(){return(a=Object(i.a)(n.a.mark((function e(){var a,c,i,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:a=e.sent,c=[],i=[],s=function(e){e.forEach((function(e){var t=Object.keys(e)[0];c.push(t),i.push(e[t])})),t(c,i)},"0000"===a.data.code&&(a.data.data.top.length>0?a.data.data.top.length>7?(l=a.data.data.top.slice(0,7),s(l)):s(a.data.data.top):ce("barAlarm"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){setTimeout((function(){!function(){a.apply(this,arguments)}()}))}),[]),Object(s.jsx)("div",{className:"charts-here chart-right-2 chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsxs)("div",{className:"home-block-title",children:[Object(s.jsx)("span",{children:"\u4eca\u65e5\u62a5\u8b66\u6392\u884cTOP7"}),Object(s.jsx)("button",{className:"morelink",onClick:function(){e({homeToUrl:{path:"alarmStatistics",query:{flag:"baojingDetail",blean:!0}}})},children:"\u67e5\u770b\u66f4\u591a>>"})]}),Object(s.jsx)("div",{className:"charts-play",id:"barAlarm"})]})})}function re(){var e=2,t="19%",a="20%",c=Object(m.d)((function(e){return e.homeReducer.setGlobalState}));function r(c,n,i,s){var l=document.querySelector("#pieAlarm")&&w.a.init(document.querySelector("#pieAlarm")),r={title:{text:s,subtext:"\u62a5\u8b66\u603b\u6570",textAlign:"center",textVerticalAlign:"top",textStyle:{color:"#3680f9",fontSize:13,align:"center"},subtextStyle:{fontSize:12,color:"#333",align:"center"},left:t,top:"center"},legend:{type:"plain",align:"left",itemGap:e,orient:"vertical",right:10,data:n,icon:"circle",itemWidth:10,itemHeight:10,textStyle:{fontSize:11,padding:[2,10,0,0]}},color:i,series:[{type:"pie",hoverOffset:5,itemStyle:{borderColor:"#fff",borderWidth:2},radius:["60%","85%"],center:[a,"50%"],avoidLabelOverlap:!1,label:{show:!1},emphasis:{label:{show:!1}},labelLine:{show:!1},data:c}]};l&&l.setOption(r)}function o(){return(o=Object(i.a)(n.a.mark((function e(){var t,a,c,i,s,l,o,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:t=e.sent,a=[],c=[],i=[],s=[],l=function(e,t){Object.keys(e).forEach((function(t,c){var n={};n.value=e[t],n.color=window.COLOR_TYPE[t],t.indexOf("\u62a5\u8b66")&&(t=t.slice(0,-2)),n.name=t,a.push(n)})),a.sort((function(e,t){return t.value-e.value})),a.forEach((function(e,t){t<10&&(c.push(e.name),i.push(e),s.push(e.color))})),r(i,c,s,t)},"0000"===t.data.code&&t.data.data.type&&(o=t.data.data.type,d=0,Object.keys(o).length>0?(Object.keys(o).forEach((function(e){d+=o[e],""===e&&delete o[e]})),l(o,d)):ce("pieAlarm"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){setTimeout((function(){!function(){o.apply(this,arguments)}(),function(){var c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;c>=1400&&c<1800?(e=8,t="23%",a="24%"):c>=1800&&c<1900?(e=12,t="29%",a="30%"):c>=1900&&(e=16,t="29%",a="30%")}()}))}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here chart-right-1 chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsxs)("div",{className:"home-block-title",children:[Object(s.jsx)("span",{children:"\u4eca\u65e5\u62a5\u8b66\u7c7b\u578b\u7edf\u8ba1TOP10"}),Object(s.jsx)("button",{className:"morelink",onClick:function(){c({homeToUrl:{path:"alarmStatistics",query:{flag:"baojingType",blean:!0}}})},children:"\u67e5\u770b\u66f4\u591a>>"})]}),Object(s.jsx)("div",{className:"charts-play",id:"pieAlarm"})]})})})}function oe(){var e=Object(l.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1];function r(){return(r=Object(i.a)(n.a.mark((function e(){var t,a,i,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c([]),e.next=3,K();case 3:t=e.sent,a=0,s=[],"0000"===t.data.code&&t.data.data&&t.data.data.length>0?((l=t.data.data).length>1&&l.sort((function(e,t){return t.monthTime-e.monthTime})),l.length>5?(i=l,i=l.slice(0,5)):i=l,a=i[0].monthTime,i.forEach((function(e,t){if(e.monthTime>0){var c=(e.monthTime/a*100).toFixed(1)+"%";e.val=c,s.push(e)}})),s.length>0?c(s):ce("rankid")):ce("rankid");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){!function(){r.apply(this,arguments)}()}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here chart-right-3 chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:"\u672c\u6708\u89c6\u9891\u67e5\u770b\u65f6\u957fTOP5"}),Object(s.jsx)("div",{className:"charts-play",children:Object(s.jsx)("div",{className:"paiming-list",id:"rankid",children:a.map((function(e,t){var a,c=(a=e.monthTime)/60>1?Math.floor(a/60)+"\u5c0f\u65f6"+a%60+"\u5206\u949f":"0\u5c0f\u65f6"+a+"\u5206\u949f",n="";return 0===t&&(n="rank-top-num rank-top-num-1"),1===t&&(n="rank-top-num rank-top-num-2"),2===t&&(n="rank-top-num rank-top-num-3"),t>2&&(n=""),Object(s.jsxs)("dl",{children:[Object(s.jsx)("dt",{className:n,children:Object(s.jsx)("span",{children:t>2?t+1:""})}),Object(s.jsxs)("dd",{children:[Object(s.jsxs)("div",{className:"chepai-total",children:[Object(s.jsx)("div",{className:"chepai-mingcheng",children:e.vname}),Object(s.jsx)("div",{className:"see-time",children:c})]}),Object(s.jsx)("div",{className:"chepai-progress",children:Object(s.jsx)("div",{className:"progress--bar",style:{width:e.val}})})]})]},t.toString())}))})})]})})})}function de(e){var t=e.client,a=Object(m.d)((function(e){return e.homeReducer.setGlobalState})),c=Object(l.useState)(null),n=Object(p.a)(c,2),i=n[0],r=n[1],o=[{title:"\u7528\u6237\u540d",dataIndex:"login_name",key:"login_name",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{title:"\u5230\u671f\u65f6\u95f4",dataIndex:"over_time",key:"over_time",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{title:"\u8ddd\u79bb\u5230\u671f\u5929\u6570",dataIndex:"days",key:"days",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}}];return Object(l.useEffect)((function(){var e;t&&(e={clientId:t,page:1,pagesize:10,vehiclename:"",vids:""},U({url:"/video/home/vehicle/getUserOverinfo",method:"post",data:e})).then((function(e){"0000"===e.data.code&&r(e.data.data.pageList)}))}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsxs)("div",{className:"home-block-title",children:[Object(s.jsx)("span",{children:"\u7528\u6237\u5230\u671f"}),Object(s.jsx)("button",{className:"morelink",onClick:function(){a({homeToUrl:{path:"guoqi",query:{flag:"yonghu"}}})},children:"\u67e5\u770b\u66f4\u591a>>"})]}),Object(s.jsx)("div",{className:"charts-play",children:Object(s.jsx)(I.a,{dataSource:i,rowKey:"role_name",pagination:!1,bordered:!0,columns:o})})]})})})}function je(e){var t=e.client,a=Object(m.d)((function(e){return e.homeReducer.setGlobalState})),c=Object(l.useState)(null),n=Object(p.a)(c,2),i=n[0],r=n[1],o=[{title:"\u8f66\u724c\u53f7\u7801",dataIndex:"vehicle_name",key:"vehicle_name",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{title:"\u5230\u671f\u65f6\u95f4",dataIndex:"overdate",key:"overdate",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{title:"\u8ddd\u79bb\u5230\u671f\u5929\u6570",dataIndex:"days",key:"days",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}}];return Object(l.useEffect)((function(){var e;t&&(e={clientId:t,page:1,pagesize:10,vehiclename:"",vids:""},U({url:"/video/home/vehicle/getVehicleOverinfo",method:"post",data:e})).then((function(e){"0000"===e.data.code&&r(e.data.data.pageList)}))}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsxs)("div",{className:"home-block-title",children:[Object(s.jsx)("span",{children:"\u8f66\u8f86\u5230\u671f"}),Object(s.jsx)("button",{className:"morelink",onClick:function(){a({homeToUrl:{path:"guoqi",query:{flag:"cheliang"}}})},children:"\u67e5\u770b\u66f4\u591a>>"})]}),Object(s.jsx)("div",{className:"charts-play",children:Object(s.jsx)(I.a,{dataSource:i,rowKey:"vehicle_id",pagination:!1,bordered:!0,columns:o})})]})})})}function ue(e){var t=e.client,a=Object(m.d)((function(e){return e.homeReducer.setGlobalState})),c=Object(l.useState)(null),n=Object(p.a)(c,2),i=n[0],r=n[1],o=[{title:"\u8f66\u724c\u53f7\u7801",dataIndex:"vehicle_name",key:"vehicle_name",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{title:"\u5230\u671f\u65f6\u95f4",dataIndex:"etime",key:"etime",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{title:"\u4fdd\u9669\u79cd\u7c7b",dataIndex:"type",key:"type",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}}];return Object(l.useEffect)((function(){var e;t&&(e={clientId:t,page:1,pagesize:10,vehiclename:"",vids:""},U({url:"/video/home/vehicle/getBaoXianOverinfo",method:"post",data:e})).then((function(e){"0000"===e.data.code&&r(e.data.data.pageList)}))}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsxs)("div",{className:"home-block-title",children:[Object(s.jsx)("span",{children:"\u4fdd\u9669\u5230\u671f"}),Object(s.jsx)("button",{className:"morelink",onClick:function(){a({homeToUrl:{path:"guoqi",query:{flag:"baoxian"}}})},children:"\u67e5\u770b\u66f4\u591a>>"})]}),Object(s.jsx)("div",{className:"charts-play",children:Object(s.jsx)(I.a,{dataSource:i,rowKey:"vehicle_id",pagination:!1,bordered:!0,columns:o})})]})})})}function he(e){var t=e.client,a=Object(m.d)((function(e){return e.homeReducer.setGlobalState})),c=Object(l.useState)(null),n=Object(p.a)(c,2),i=n[0],r=n[1],o=[{title:"\u8f66\u724c\u53f7\u7801",dataIndex:"vehicle_name",key:"vehicle_name",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{title:"\u5230\u671f\u65f6\u95f4",dataIndex:"etime",key:"etime",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}}];return Object(l.useEffect)((function(){var e;t&&(e={clientId:t,page:1,pagesize:10,vehiclename:"",vids:""},U({url:"/video/home/vehicle/getNainJianOverinfo",method:"post",data:e})).then((function(e){"0000"===e.data.code&&r(e.data.data.pageList)}))}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsxs)("div",{className:"home-block-title",children:[Object(s.jsx)("span",{children:"\u5e74\u68c0\u5230\u671f"}),Object(s.jsx)("button",{className:"morelink",onClick:function(){a({homeToUrl:{path:"guoqi",query:{flag:"nianjian"}}})},children:"\u67e5\u770b\u66f4\u591a>>"})]}),Object(s.jsx)("div",{className:"charts-play",children:Object(s.jsx)(I.a,{dataSource:i,rowKey:"vehicle_id",pagination:!1,bordered:!0,columns:o})})]})})})}function me(e){var t=e.his,a=Object(m.d)((function(e){return e.homeReducer.setGlobalState}));return Object(l.useEffect)((function(){}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:Object(s.jsx)("span",{children:"\u6700\u8fd1\u6d4f\u89c8"})}),Object(s.jsx)("div",{className:"charts-play",style:{paddingLeft:"10px",paddingRight:"10px"},children:t&&t.map((function(e,t){return Object(s.jsx)(T.a,{onClick:function(){a({homeToUrl:{path:e.path}})},color:"#2db7f5",children:e.describes},t)}))})]})})})}function be(e){var t=e.client,a=Object(m.d)((function(e){return e.homeReducer.setGlobalState}));return Object(l.useEffect)((function(){var e;t&&(e={btime:L(0,0,1).startTime,etime:L(0,0,1).endTime,vids:"",vehiclename:"",clientId:t,page:1,pagesize:7},U({url:"/video/report/mileageStatistics",method:"post",data:e})).then((function(e){if("0000"===e.data.code){var t=[],a=[];e.data.data.pageList.forEach((function(e){t.push(e.vehicle_name),a.push(e.dis),function(e,t){var a=w.a.init(document.querySelector("#barAlarm2")),c={color:["#ff825c"],grid:{containLabel:!0,left:15,top:10,right:15,bottom:5},xAxis:{type:"category",data:e,splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#333",fontSize:11,rotate:20},axisTick:{alignWithLabel:!0,inside:!0}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#333"},axisTick:{alignWithLabel:!0,inside:!0}},series:[{data:t,type:"bar",barWidth:25}]};a&&a.setOption(c)}(t,a)}))}else ce("barAlarm2")})).catch((function(e){console.log(e),ce("barAlarm2")}))}),[t]),Object(s.jsx)("div",{className:"charts-here chart-right-2 chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsxs)("div",{className:"home-block-title",children:[Object(s.jsxs)("span",{children:["\u4eca\u65e5\u91cc\u7a0b\u6392\u884c",Object(s.jsx)("span",{style:{color:"#ff0000"},children:"TOP7"}),"(km)"]}),Object(s.jsx)("button",{className:"morelink",onClick:function(){a({homeToUrl:{path:"kmStatistics",query:{flag:"detail"}}})},children:"\u67e5\u770b\u66f4\u591a>>"})]}),Object(s.jsx)("div",{className:"charts-play",id:"barAlarm2"})]})})}function pe(e){var t=e.page,a=e.treeClient,c=e.his;return t?10===t?Object(s.jsx)(re,{}):11===t?Object(s.jsx)(le,{}):12===t?Object(s.jsx)(oe,{}):13===t?Object(s.jsx)(be,{client:a}):14===t?Object(s.jsx)(ue,{client:a}):15===t?Object(s.jsx)(he,{client:a}):16===t?Object(s.jsx)(de,{client:a}):17===t?Object(s.jsx)(je,{client:a}):18===t?Object(s.jsx)(me,{his:c}):void 0:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"charts-here chart-right-page",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title"}),Object(s.jsx)("div",{className:"charts-play"})]})})})}var fe=Object(m.b)()((function(){var e=Object(l.useState)({data_mod:[],statistics_mod:[10,11,12]}),t=Object(p.a)(e,2),a=t[0],c=t[1],n=Object(m.c)(),i=Object(l.useState)(),r=Object(p.a)(i,2),o=r[0],d=r[1],j=Object(m.d)((function(e){return e.homeReducer.urlRecord})),u=Object(m.d)((function(e){return e.homeReducer.homeMoudle})),h=Object(l.useState)(),b=Object(p.a)(h,2),f=b[0],O=b[1];return Object(l.useEffect)((function(){var e,t;ee().then((function(a){a.data.data&&(e=""!==a.data.data.data_mod?a.data.data.data_mod.split(",").map(Number):"1,2,3,4,5,6,7,8,9",t=""!==a.data.data.statistics_mod?a.data.data.statistics_mod.split(",").map(Number):"10,11,12",c({data_mod:e,statistics_mod:t}),n({type:"homeMoudle",value:0}))}));var a=[],i="";te().then((function(e){"0000"===e.data.code&&e.data.data.length>0&&(e.data.data.forEach((function(e){a.push(e.clientId)})),i=a.toString(),O(i))}))}),[]),Object(l.useEffect)((function(){!function(){var e=document.querySelector(".chart").offsetHeight,t=document.querySelector(".chart").offsetWidth;document.querySelector(".home-chart-right").style.width=t/3.6+"px";var a=document.querySelector(".home-chart-right").offsetWidth;document.querySelector(".home-chart-left").style.width=t-a-10+"px",document.querySelector(".home-curve-chart").style.height=e/2.8+"px";var c=document.querySelector(".home-curve-chart").offsetHeight;document.querySelector(".home-map-chart").style.height=e-c+"px",document.querySelectorAll(".chart-right-page")[1].style.height=document.querySelectorAll(".chart-right-page")[2].style.height=c+"px";var n=document.querySelectorAll(".chart-right-page")[2].offsetHeight;document.querySelectorAll(".chart-right-page")[0].style.height=e-2*n+"px"}()}),[a]),Object(l.useEffect)((function(){1===j&&U({url:"/video/userData/userBrowse/list",method:"post"}).then((function(e){"0000"===e.data.code&&(d(e.data.data),n({type:"urlRecord",value:0}))}))}),[j]),Object(l.useEffect)((function(){1===u&&ee().then((function(e){if(e.data.data){var t=e.data.data.data_mod.split(",").map(Number),a=e.data.data.statistics_mod.split(",").map(Number);c({data_mod:t,statistics_mod:a}),n({type:"homeMoudle",value:0})}}))}),[u]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(ae.Provider,{value:a,children:Object(s.jsxs)("div",{className:"homepage home-normal",children:[Object(s.jsx)(ne,{}),Object(s.jsxs)("div",{className:"chart",children:[Object(s.jsxs)("div",{className:"home-chart-left",children:[Object(s.jsx)(ie,{}),Object(s.jsx)(se,{})]}),Object(s.jsxs)("div",{className:"home-chart-right",children:[Object(s.jsx)(pe,{page:a.statistics_mod[0],treeClient:f,his:o}),Object(s.jsx)(pe,{page:a.statistics_mod[1],treeClient:f,his:o}),Object(s.jsx)(pe,{page:a.statistics_mod[2],treeClient:f,his:o})]})]})]})})})})),Oe=a(260),xe={vTotal:"-",adasTotal:"-",onlineRate:"-"};function ve(e,t){if("total"===t.type){var a=Object.assign({},e);return a.vTotal=t.value,a}if("atotal"===t.type){var c=Object.assign({},e);return c.adasTotal=t.value,c}if("online"===t.type){var n=Object.assign({},e);return n.onlineRate=t.value,n}return e}function ge(e){var t=document.querySelector("#"+e);t.innerHTML="";t.innerHTML=' <div style="position:relative;height:100%;width:100%;display:flex;justify-content: center;align-items: center;">\n                                  <span style="font-size:16px;color:#666">\u6682\u65e0\u6570\u636e\uff01</span>  \n                      </div>  '}function ye(e,t,a){return 0===a?{startTime:Ne(e),endTime:Ne(t)}:{startTime:Ne(e)+" 00:00:00",endTime:Ne(t)+" 23:59:59"}}function Ne(e){var t=new Date,a=function(e){var t=e;return 1===e.toString().length&&(t="0"+e),t},c=t.getTime()-864e5*e;t.setTime(c);var n=t.getFullYear(),i=t.getMonth(),s=t.getDate();return s=a(s),n+"-"+(i=a(i+1))+"-"+s}var Se=Object(l.createContext)();function we(){var e=Object(l.useContext)(Se),t=e.treeId,a=e.userId;function c(){var e,c=ye(7,1),n=null,i=[],s=[];void 0!==t&&void 0!==a&&(e={clientIds:t,startTime:c.startTime,endTime:c.endTime,userId:a,vehicleIds:""},U({url:"/report/adas/queryDayRuleAlarmCount",method:"post",data:e})).then((function(e){e&&200===e.data.code&&""!==e.data.data&&0!==e.data.data.length?((n=e.data.data).length>1&&n.sort((function(e,t){return Date.parse(e.day)-Date.parse(t.day)})),n.length>7&&n.slice(0,7),n.forEach((function(e){var t=e.day.slice(5);i.push(t),s.push(e.count)})),function(e,t){var a={tooltip:{trigger:"axis"},grid:{containLabel:!0,left:15,top:30,right:15,bottom:5},color:["#ff744a"],xAxis:{type:"category",data:e,splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#999999"},axisTick:{alignWithLabel:!0,inside:!0}},yAxis:{type:"value",name:"\u6b21",nameTextStyle:{color:"#333",align:"right",fontSize:12},splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#999999"},axisTick:{alignWithLabel:!0,inside:!0}},series:[{data:t,type:"line",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#ffd4c7"},{offset:1,color:"#fffdfc"}],global:!1}}}]};w.a.init(document.querySelector("#day7-fenxi")).setOption(a)}(i,s)):ge("day7-fenxi")}))}return Object(l.useEffect)((function(){c()}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"left-item",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:"\u8fd17\u65e5\u4e3b\u52a8\u5b89\u5168\u62a5\u8b66\u8d8b\u52bf\u5206\u6790"}),Object(s.jsx)("div",{className:"charts-play",id:"day7-fenxi"})]})})})}function ke(){var e=Object(l.useContext)(Se),t=e.treeId,a=e.userId,c=Object(l.useState)([]),n=Object(p.a)(c,2),i=n[0],r=n[1],o=[{key:"rankTop",title:"\u6392\u540d",dataIndex:"rankTop",width:60,align:"center",render:function(e){return 1===e?Object(s.jsx)("span",{className:"rank-top-num rank-top-num-1"}):2===e?Object(s.jsx)("span",{className:"rank-top-num rank-top-num-2"}):3===e?Object(s.jsx)("span",{className:"rank-top-num rank-top-num-3"}):e>3?Object(s.jsx)("span",{children:e}):void 0}},{key:"clientName",title:"\u5ba2\u6237",dataIndex:"clientName",ellipsis:!0,render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{key:"score",title:"\u5e73\u5747\u5f97\u5206",dataIndex:"score",width:80,render:function(e){return Object(s.jsx)("span",{style:{color:"rgb(250, 23, 23)",fontStyle:"italic",fontWeight:"bold"},children:e})}}];function d(){var e,c=0,n=ye(1,1,0);void 0!==t&&void 0!==a&&(e={clientIds:t,preId:"",preScore:0,reportDate:n.startTime,type:0,userId:a},U({url:"/report/adas/queryClientScores",method:"post",data:e})).then((function(e){e&&200===e.data.code&&""!==e.data.data&&0!==e.data.data.list.length?((c=e.data.data.list).length>1&&c.sort((function(e,t){return t.score-e.score})),c.length>5&&(c=c.slice(-5)),c.sort((function(e,t){return e.score-t.score})),c.forEach((function(e,t){var a=t+1;e.rankTop=a,e.key=t.toString()})),r(Object(b.a)(c))):ge("yestoday-fenxi")}))}return Object(l.useEffect)((function(){d()}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"left-item",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:"\u6628\u65e5\u5ba2\u6237\u76d1\u7ba1\u6700\u5dee\u7edf\u8ba1\u6392\u540d"}),Object(s.jsx)("div",{className:"charts-play",id:"yestoday-fenxi",style:{paddingLeft:10,paddingBottom:0,paddingTop:0,overflow:"auto"},children:Object(s.jsx)(I.a,{locale:{emptyText:"\u52a0\u8f7d\u4e2d"},columns:o,dataSource:i,pagination:!1})})]})})})}function Ie(){var e=Object(l.useContext)(Se),t=e.treeId,a=e.userId;function c(e,t){var a={tooltip:{backgroundColor:"rgba(50,50,50,0.7)"},legend:{type:"scroll",align:"left",itemGap:8,orient:"vertical",right:10,data:e,icon:"circle",itemWidth:12,itemHeight:12,textStyle:{fontSize:12,padding:[2,10,0,0]}},color:["#4680f5","#afc8fa","#62daab","#bbf5dd","#d0d6e0","#f6c022","#fae3a1","#e96c5b","#e96c5b","#f5b5ae","#74cbed"],series:[{type:"pie",hoverOffset:5,itemStyle:{borderColor:"#fff",borderWidth:2},radius:["60%","85%"],center:["32%","50%"],avoidLabelOverlap:!1,label:{show:!1},emphasis:{label:{show:!1}},labelLine:{show:!1},data:t}]};w.a.init(document.querySelector("#dayPie-fenxi")).setOption(a)}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=ye(0,0);void 0!==t&&void 0!==a&&Y({alarmType:e,clientIds:t,startTime:n.startTime,endTime:n.endTime,userId:a}).then((function(e){var t=[],a=[];if(!e||200!==e.data.code||""===e.data.data||0===e.data.data.length)return w.a.init(document.querySelector("#dayPie-fenxi")).dispose(),void ge("dayPie-fenxi");e.data.data.forEach((function(e){var c={};a.push(e.alarmKey),c.name=e.alarmKey,c.value=e.alarmCount,t.push(c)})),c(a,t)}))}return Object(l.useEffect)((function(){setTimeout((function(){n()}))}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"left-item",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsxs)("div",{className:"home-block-title",children:[Object(s.jsx)("span",{children:"\u4eca\u65e5\u4e3b\u52a8\u5b89\u5168\u62a5\u8b66\u7c7b\u578b"}),Object(s.jsxs)(Oe.a.Group,{defaultValue:"0",buttonStyle:"solid",size:"small",onChange:function(e){!function(e){n(e)}(Number(e.target.value))},children:[Object(s.jsx)(Oe.a.Button,{value:"0",children:"\u5168\u90e8"}),Object(s.jsx)(Oe.a.Button,{value:"1",children:"ADAS"}),Object(s.jsx)(Oe.a.Button,{value:"2",children:"DSM"}),Object(s.jsx)(Oe.a.Button,{value:"3",children:"\u80ce\u538b"}),Object(s.jsx)(Oe.a.Button,{value:"4",children:"\u76f2\u533a"})]})]}),Object(s.jsx)("div",{className:"charts-play",id:"dayPie-fenxi"})]})})})}function Te(){var e=Object(l.useContext)(Se),t=e.treeId,a=e.userId;function c(){var e,c=[],n=[],i=(new Date).getHours(),s=[];void 0!==t&&void 0!==a&&(e={clientIds:t,userId:a,vehicleIds:""},U({url:"/report/adas/queryTodayHourRuleAlarmCount",method:"post",data:e})).then((function(e){e&&200===e.data.code&&""!==e.data.data&&0!==e.data.data.length?(s.push.apply(s,Object(b.a)(e.data.data.slice(0,i+1))),s.forEach((function(e){var t=parseInt(e.hour),a="";a=t<10?"0"+t+":00":t+":00",c.push(a),n.push(e.count)})),function(e,t){var a={tooltip:{trigger:"axis"},grid:{containLabel:!0,left:15,top:30,right:15,bottom:5},color:["#5080fc"],xAxis:{type:"category",data:e,splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#999999"},axisTick:{alignWithLabel:!0,inside:!0}},yAxis:{type:"value",name:"\u6b21",nameTextStyle:{color:"#333",align:"right",fontSize:12},splitLine:{show:!0,lineStyle:{color:"#e9ebf1"}},axisLine:{lineStyle:{color:"#e9ebf1"}},axisLabel:{color:"#999999"},axisTick:{alignWithLabel:!0,inside:!0}},series:[{data:t,type:"line",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#acc3fe"},{offset:1,color:"#eeeeee"}],global:!1}}}]};w.a.init(document.querySelector("#day-fenxi")).setOption(a)}(c,n)):ge("day-fenxi")}))}return Object(l.useEffect)((function(){c()}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"alarmType",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:Object(s.jsx)("span",{children:"\u4eca\u65e5\u4e3b\u52a8\u5b89\u5168\u62a5\u8b66\u5206\u6790"})}),Object(s.jsx)("div",{className:"charts-play",id:"day-fenxi"})]})})})}function Ce(){var e=Object(l.useContext)(Se),t=e.state,a=e.dispatch,c=Object(l.useState)(null),n=Object(p.a)(c,2),i=n[0],r=n[1],o=null;function d(){o=new g.a.Map("mapDistributions",{zoom:4}),(new g.a.DistrictSearch).search("\u4e2d\u56fd",(function(e,t){"complete"===e&&N.a.load(["ui/geo/DistrictExplorer","ui/geo/DistrictCluster","lib/$","ui/misc/PointSimplifier"],(function(e,t,a,c){window.DistrictCluster=t,function(e,t){var a=new e({map:o,zIndex:11,getPosition:function(e){return e},renderOptions:{featureStyleByLevel:{country:{fillStyle:"rgba(230, 240, 245, 0.8)"},province:{fillStyle:"rgba(80, 171, 242, 0.7)"},city:{fillStyle:"rgba(144, 200, 244, 0.6)"},district:{fillStyle:"rgba(193, 222, 245, 0.5)"}}},autoSetFitView:!1});window.distCluster=a,J().then((function(e){if(e&&"0000"===e.data.code){var t=e.data.data,c=[],n=[];t.forEach((function(e,t){var a=[];!0===e.online&&(a.push(e.lng,e.lat),n.push(a),c.push(a))})),r(c.length),a.setData(n)}}))}(t)}))}))}return Object(l.useEffect)((function(){d()}),[]),Object(l.useEffect)((function(){var e=(i/t.vTotal*100).toFixed(2)+"%";null!==i&&!0===!isNaN(t.vTotal)?a({type:"online",value:e}):a({type:"online",value:"-"})}),[t.vTotal,i]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"alarmMap",children:[Object(s.jsx)("div",{className:"home-block-title",style:{position:"absolute",zIndex:1e3},children:"\u5728\u7ebf\u8f66\u8f86\u5730\u56fe\u5206\u5e03"}),Object(s.jsx)("div",{className:"alarm-map",id:"mapDistributions"})]})})}function Le(){var e=Object(l.useContext)(Se),t=e.treeId,a=e.userId,c=Object(l.useState)([]),n=Object(p.a)(c,2),i=n[0],r=n[1],o=[{key:"clientName",title:"\u5ba2\u6237",dataIndex:"clientName",render:function(e){return Object(s.jsx)(k.a,{placement:"topLeft",title:e,children:e})}},{key:"total",title:"\u62a5\u8b66\u6b21\u6570",dataIndex:"total",width:80,ellipsis:!0,render:function(e){return Object(s.jsx)("span",{style:{color:"#E6A23C",fontWeight:"bold"},children:e})}},{key:"manualCount",title:"\u5904\u7406\u6b21\u6570(\u624b\u52a8)",dataIndex:"manualCount",width:110,render:function(e){return Object(s.jsx)("span",{style:{color:"#3191ff"},children:e})}}];function d(){var e,c=ye(0,0);void 0!==t&&void 0!==a&&(e={clientIds:t,startTime:c.startTime,endTime:c.endTime,userId:a},U({url:"/report/adas/queryClientRuleAlarmCount",method:"post",data:e})).then((function(e){e&&200===e.data.code&&""!==e.data.data&&0!==e.data.data.length?(e.data.data.sort((function(e,t){return t.total-e.total})),e.data.data.forEach((function(e,t){e.key=t.toString()})),r(Object(b.a)(e.data.data))):ge("day-alarm-handle")}))}return Object(l.useEffect)((function(){d()}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"left-item",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:"\u4eca\u65e5\u5ba2\u6237\u62a5\u8b66\u5904\u7406\u7edf\u8ba1"}),Object(s.jsx)("div",{className:"charts-play",id:"day-alarm-handle",style:{paddingLeft:10,paddingBottom:8,paddingTop:0,overflow:"auto"},children:Object(s.jsx)(I.a,{locale:{emptyText:"\u52a0\u8f7d\u4e2d"},columns:o,dataSource:i,pagination:!1})})]})})})}function Ee(){var e=Object(l.useContext)(Se),t=e.treeId,a=e.userId,c=e.dispatch;function n(){var e,n=[],i=null,s=ye(0,0),l=function(e,t){e.forEach((function(e){var a={};"handledCount"===e&&(a.name="\u5df2\u5904\u7406",a.value=t[e],n.push(a)),"unhandledCount"===e&&(a.name="\u672a\u5904\u7406",a.value=t[e],n.push(a))})),function(e){var t={grid:{containLabel:!0},legend:{type:"plain",align:"left",itemGap:2,orient:"vertical",right:10,data:["\u5df2\u5904\u7406","\u672a\u5904\u7406"],icon:"circle",itemWidth:10,itemHeight:10,textStyle:{fontSize:11,padding:[2,10,0,0]}},color:["#3191ff","#ff7621"],series:[{hoverAnimation:!1,type:"pie",hoverOffset:5,clockWise:!1,itemStyle:{borderColor:"#fff",borderWidth:2},radius:"55%",center:["50%","52%"],avoidLabelOverlap:!1,label:{show:!0,formatter:"\u603b\u6570\uff1a{c|{c}} \n \u5360\u6bd4\uff1a{per|{d}%}",borderWidth:1,borderRadius:4,align:"center",rich:{c:{fontWeight:"bold",fontSize:12},per:{padding:[6,4],fontSize:12,fontWeight:"bold"}}},labelLine:{length2:1},emphasis:{label:{show:!1}},data:e}]};w.a.init(document.querySelector("#dayPies-fenxi")).setOption(t)}(n)};void 0!==t&&void 0!==a&&(e={clientIds:t,startTime:s.startTime,endTime:s.endTime,userId:a,vehicleIds:""},U({url:"/report/adas/queryRuleAlarmCount",method:"post",data:e})).then((function(e){if(!e||200!==e.data.code||""===e.data.data)return c({type:"atotal",value:"-"}),void ge("dayPies-fenxi");c({type:"atotal",value:e.data.data.total}),i=Object.keys(e.data.data),l(i,e.data.data)}))}return Object(l.useEffect)((function(){n()}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"left-item",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:"\u4eca\u65e5\u4e3b\u52a8\u5b89\u5168\u62a5\u8b66\u5904\u7406\u60c5\u51b5"}),Object(s.jsx)("div",{className:"charts-play",id:"dayPies-fenxi"})]})})})}function Ae(){var e=Object(l.useContext)(Se),t=e.treeId,a=e.userId,c=Object(l.useState)([]),n=Object(p.a)(c,2),i=n[0],r=n[1];function o(){var e,c=ye(0,0),n=0;void 0!==t&&void 0!==a&&(e={clientIds:t,startTime:c.startTime,endTime:c.endTime,userId:a},U({url:"/report/adas/queryVehicleRuleAlarmCount",method:"post",data:e})).then((function(e){if(e&&200===e.data.code&&""!==e.data.data&&0!==e.data.data.length){var t=e.data.data;t.length>1&&t.sort((function(e,t){return t.total-e.total})),n=t[0].total,t.length>7&&(t=t.slice(0,7)),t.forEach((function(e){if(e.total>0){var t=(e.total/n*100).toFixed(1)+"%";e.percent=t}0===e.total&&(e.percent="100%")})),r(Object(b.a)(t))}else ge("rankids")}))}return Object(l.useEffect)((function(){o()}),[t]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"left-item",children:Object(s.jsxs)("div",{className:"charts-draw",children:[Object(s.jsx)("div",{className:"home-block-title",children:"\u4eca\u65e5\u62a5\u8b66\u8f66\u8f86TOP7"}),Object(s.jsx)("div",{className:"charts-play",children:Object(s.jsx)("div",{className:"paiming-list",id:"rankids",children:i.map((function(e,t){var a="";return 0===t&&(a="rank-top-num rank-top-num-1"),1===t&&(a="rank-top-num rank-top-num-2"),2===t&&(a="rank-top-num rank-top-num-3"),t>2&&(a=""),Object(s.jsxs)("dl",{children:[Object(s.jsx)("dt",{className:a,children:Object(s.jsx)("span",{children:t>2?t+1:""})}),Object(s.jsxs)("dd",{children:[Object(s.jsxs)("div",{className:"chepai-total",children:[Object(s.jsx)("div",{className:"chepai-mingcheng",children:e.vehicleName}),Object(s.jsx)("div",{className:"see-time",children:e.total})]}),Object(s.jsx)("div",{className:"chepai-progress",children:Object(s.jsx)("div",{className:"progress--bar",style:{width:e.percent,background:"#ff6c40"}})})]})]},t.toString())}))})})]})})})}function qe(){var e=Object(l.useContext)(Se),t=e.state,a=e.dispatch,c=G().adasCount,r=Object(l.useState)("-"),o=Object(p.a)(r,2),d=o[0],j=o[1];function u(){return(u=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:(t=e.sent).data.data>0?j(t.data.data):j(0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){B().then((function(e){e&&"0000"===e.data.code&&""!==e.data.data||a({type:"total",value:"-"}),a({type:"total",value:e.data.data})}))}),[t.onlineSum]),Object(l.useEffect)((function(){!function(){u.apply(this,arguments)}()}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"homePage-map-total",children:[Object(s.jsx)("div",{className:"map-total-list",children:Object(s.jsxs)("div",{className:"map-total-content",children:[Object(s.jsx)("p",{children:"\u4eca\u65e5\u4e3b\u52a8\u5b89\u5168\u62a5\u8b66"}),Object(s.jsx)("p",{className:"total-num",children:t.adasTotal})]})}),Object(s.jsx)("div",{className:"map-total-list",children:Object(s.jsxs)("div",{className:"map-total-content",children:[Object(s.jsx)("p",{children:"\u603b\u8f66\u8f86"}),Object(s.jsx)("p",{className:"total-num",children:t.vTotal})]})}),Object(s.jsx)("div",{className:"map-total-list",children:Object(s.jsxs)("div",{className:"map-total-content",children:[Object(s.jsx)("p",{children:"\u4e3b\u52a8\u5b89\u5168\u8f66\u8f86"}),Object(s.jsx)("p",{className:"total-num",children:d})]})}),Object(s.jsx)("div",{className:"map-total-list",children:Object(s.jsxs)("div",{className:"map-total-content",children:[Object(s.jsx)("p",{children:"\u5f53\u524d\u8f66\u8f86\u5728\u7ebf\u7387"}),Object(s.jsx)("p",{className:"total-num",children:t.onlineRate})]})})]})})}var Fe=Object(m.b)()((function(){var e=Object(l.useState)(),t=Object(p.a)(e,2),a=t[0],c=t[1],r=Object(l.useReducer)(ve,xe),o=Object(p.a)(r,2),d=o[0],j=o[1],u=Object(m.d)((function(e){return e.homeReducer.userId}));function h(){return(h=Object(i.a)(n.a.mark((function e(){var t,a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a="",e.next=4,te();case 4:if((i=e.sent)&&"0000"===i.data.code&&0!==i.data.data.length){e.next=7;break}return e.abrupt("return");case 7:i.data.data.forEach((function(e){t.push(e.clientId)})),a=t.toString(),c(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){!function(){h.apply(this,arguments)}()}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"homepage homepadding",children:Object(s.jsxs)(Se.Provider,{value:{treeId:a,userId:u,state:d,dispatch:j},children:[Object(s.jsxs)("div",{className:"homePage-left",children:[Object(s.jsx)(we,{}),Object(s.jsx)(ke,{}),Object(s.jsx)(Ie,{})]}),Object(s.jsx)("div",{className:"homePage-middle",children:Object(s.jsx)("div",{className:"homePage-map-panel",children:Object(s.jsxs)("div",{className:"homePage-map-map",children:[Object(s.jsx)(qe,{}),Object(s.jsx)(Ce,{}),Object(s.jsx)(Te,{})]})})}),Object(s.jsxs)("div",{className:"homePage-right",children:[Object(s.jsx)(Le,{}),Object(s.jsx)(Ee,{}),Object(s.jsx)(Ae,{})]})]})})})})),We=a(128),_e=a(1093),ze=null,Re=null,Me=[],De=null,Pe=null,He=null,Ue=[-100,0],Be=4,Ge=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;function Ve(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var c=t[a].split("=");if(c[0]==e)return c[1]}return!1}function Je(e){var t=document.querySelector("#"+e);t.innerHTML="";t.innerHTML=' <div style="position:relative;height:100%;width:100%;display:flex;justify-content: center;align-items: center;">\n                                    <span style="font-size:16px;color:#666">\u6682\u65e0\u6570\u636e\uff01</span>  \n                        </div>  '}function Ke(){var e=Object(l.useContext)(at).clientid,t=Object(l.useState)("-"),a=Object(p.a)(t,2),c=a[0],n=a[1],i=Object(l.useState)("-"),r=Object(p.a)(i,2),o=r[0],d=r[1],j=Object(l.useState)("-"),u=Object(p.a)(j,2),h=u[0],m=u[1],b=Object(l.useState)("-"),f=Object(p.a)(b,2),O=f[0],x=f[1],v=Object(l.useState)("-"),g=Object(p.a)(v,2),y=g[0],N=g[1],S=Object(l.useState)("-"),w=Object(p.a)(S,2),k=w[0],I=w[1];function T(){var t;void 0!==e&&((t={clientid:e},U({url:"/video/datashow/public/ams/vehicle/count",method:"post",params:t})).then((function(e){e&&"0000"===e.data.code&&""!==e.data.data?n(e.data.data):n("-")})).catch((function(e){console.error(e),n("-")})),function(e){return U({url:"/video/datashow/public/ams/vehicle/online/count",method:"post",params:e})}({clientid:e}).then((function(e){e&&"0000"===e.data.code&&""!==e.data.data?d(e.data.data):d("-")})).catch((function(e){console.error(e),d("-")})),function(e){return U({url:"/video/datashow/public/ams/vehicle/offline/count",method:"post",params:e})}({clientid:e}).then((function(e){e&&"0000"===e.data.code&&""!==e.data.data?m(e.data.data):m("-")})).catch((function(e){console.error(e),m("-")})),function(e){return U({url:"/video/datashow/public/ams/vehicle/run/count",method:"post",params:e})}({clientid:e}).then((function(e){e&&"0000"===e.data.code&&""!==e.data.data?x(e.data.data):x("-")})).catch((function(e){console.error(e),x("-")})),function(e){return U({url:"/video/datashow/public/ams/vehicle/warn/count",method:"post",params:e})}({clientid:e}).then((function(e){e&&"0000"===e.data.code&&""!==e.data.data?N(e.data.data):N("-")})).catch((function(e){console.error(e),N("-")})),function(e){return U({url:"/video/datashow/public/ams/vehicle/alarm/count",method:"post",params:e})}({clientid:e}).then((function(e){e&&"0000"===e.data.code&&""!==e.data.data?I(e.data.data):I("-")})).catch((function(e){console.error(e),I("-")})))}return Object(l.useEffect)((function(){T();var e=null,t=setInterval((function(){!function(e){var t=[].slice.call(document.querySelectorAll(".itemChild-n"));"add"===e?t.forEach((function(e){e.classList.add("itemChild-animation")})):t.forEach((function(e){e.classList.remove("itemChild-animation")}))}(e=e&&"add"===e?"remove":"add")}),1e4),a=setInterval((function(){T()}),2e4);return function(){clearInterval(a),clearInterval(t)}}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"leftItem",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{children:"\u8f66\u8f86\u8be6\u60c5"})}),Object(s.jsxs)("div",{className:"itembody",children:[Object(s.jsxs)("div",{className:"itemRow",children:[Object(s.jsxs)("div",{className:"itemChild",children:[Object(s.jsx)("span",{className:"itemChild-t",children:"\u8f66\u8f86\u603b\u6570"}),Object(s.jsx)("span",{className:"itemLine-sq-l"}),Object(s.jsx)("span",{className:"itemLine-sq-r"})]}),Object(s.jsxs)("div",{className:"itemChild",children:[Object(s.jsx)("span",{className:"itemChild-t",children:"\u5728\u7ebf\u8f66\u8f86"}),Object(s.jsx)("span",{className:"itemLine-sq-l"}),Object(s.jsx)("span",{className:"itemLine-sq-r"})]}),Object(s.jsxs)("div",{className:"itemChild",children:[Object(s.jsx)("span",{className:"itemChild-t",children:"\u79bb\u7ebf\u8f66\u8f86"}),Object(s.jsx)("span",{className:"itemLine-sq-l"}),Object(s.jsx)("span",{className:"itemLine-sq-r"})]})]}),Object(s.jsxs)("div",{className:"itemRow itemNum",children:[Object(s.jsx)("div",{className:"itemChild",children:Object(s.jsx)("span",{className:"itemChild-n ",children:c})}),Object(s.jsx)("div",{className:"itemChild",children:Object(s.jsx)("span",{className:"itemChild-n",children:o})}),Object(s.jsx)("div",{className:"itemChild",children:Object(s.jsx)("span",{className:"itemChild-n",children:h})})]}),Object(s.jsxs)("div",{className:"itemRow",children:[Object(s.jsxs)("div",{className:"itemChild",children:[Object(s.jsx)("span",{className:"itemChild-t",children:"\u884c\u9a76\u8f66\u8f86"}),Object(s.jsx)("span",{className:"itemLine-sq-l"}),Object(s.jsx)("span",{className:"itemLine-sq-r"})]}),Object(s.jsxs)("div",{className:"itemChild",children:[Object(s.jsx)("span",{className:"itemChild-t",children:"\u5b9a\u4f4d\u5f02\u5e38"}),Object(s.jsx)("span",{className:"itemLine-sq-l"}),Object(s.jsx)("span",{className:"itemLine-sq-r"})]}),Object(s.jsxs)("div",{className:"itemChild",children:[Object(s.jsx)("span",{className:"itemChild-t",children:"\u62a5\u8b66\u8f66\u8f86"}),Object(s.jsx)("span",{className:"itemLine-sq-l"}),Object(s.jsx)("span",{className:"itemLine-sq-r"})]})]}),Object(s.jsxs)("div",{className:"itemRow itemNum",children:[Object(s.jsx)("div",{className:"itemChild",children:Object(s.jsx)("span",{className:"itemChild-n",children:O})}),Object(s.jsx)("div",{className:"itemChild",children:Object(s.jsx)("span",{className:"itemChild-n",children:y})}),Object(s.jsx)("div",{className:"itemChild",children:Object(s.jsx)("span",{className:"itemChild-n",children:k})})]})]})]})})})}function Ye(e){var t=e.pos,a=Object(l.useState)(null),c=Object(p.a)(a,2),n=c[0],i=c[1];return Object(l.useEffect)((function(){var e=[];null!==t&&void 0!==t&&(null===n?(e.push(t),i(e)):((e=Object(b.a)(n)).push(t),i(e)))}),[t]),Object(l.useEffect)((function(){e&&clearTimeout(e);var e=null;n&&2===n.length&&(e=setTimeout((function(){var e=Object(b.a)(n);e.splice(0,1),i(e)}),900))}),[n]),n&&n.length>0?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"position-panel",children:n.map((function(e,t){return e?Object(s.jsxs)("p",{className:["mapPos",0===t&&n.length>1?"active":""].join(" "),children:[e.vehicleName,"\xa0\xa0",e.startTime,"\xa0\xa0",e.alarmInfo,"(",e.alarmLevelInfo,")\xa0\xa0",e.posinfo]},t.toString()):Object(s.jsx)(s.Fragment,{})}))})}):Object(s.jsx)(s.Fragment,{})}function Qe(){var e=Object(l.useState)(null),t=Object(p.a)(e,2),a=t[0],c=t[1],n=Object(l.useContext)(at).clientid;function i(e,t){if(null!==a){a.clear();var c={tooltip:{show:!1,trigger:"item"},radar:{center:["50%","50%"],radius:"90%",startAngle:135,splitNumber:5,shape:"circle",name:{fontSize:10},splitArea:{areaStyle:{color:"#082930"}},axisLabel:{show:!1,fontSize:12,color:"#fff",fontStyle:"normal",fontWeight:"normal"},axisLine:{show:!0,lineStyle:{color:"#0f4854"}},splitLine:{show:!0,lineStyle:{color:"#0f4854"}},indicator:e},series:[{type:"radar",symbol:"circle",symbolSize:8,label:{color:"#fff"},areaStyle:{borderColor:"rgba(0,0,0)"},itemStyle:{color:"#02a584",borderColor:"#02a584",borderWidth:1},lineStyle:{type:"solid",color:"#00fdbb",width:2},data:t}]};a.setOption(c)}}function r(){var e;void 0!==n&&((e={clientid:n},U({url:"/video/datashow/public/ams/alarm/type",method:"post",params:e})).then((function(e){if(e&&"0000"===e.data.code&&""!==e.data.data){var t=[],a=[],c={},n=[];for(var s in e.data.data)a.push(e.data.data[s]);for(var l in(n=[].concat(a)).sort((function(e,t){return t-e})),e.data.data){var r={},o="#fff";switch(r.max=n[0],l){case"adas":r.name="ADAS",r.color=o;break;case"dsm":r.name="DSM",r.color=o;break;case"alarm":r.name="\u7ec8\u7aef",r.color=o;break;case"alarmsoft":r.name="\u5e73\u53f0",r.color=o;break;default:r={}}t.push(r)}c.name="\u62a5\u8b66\u5206\u7c7b",c.value=a,i(t,[c])}else Je("alarmType")})).catch((function(e){console.error(e),Je("alarmType")})),i())}return Object(l.useEffect)((function(){c(w.a.init(document.getElementById("alarmType")));var e;return e=setInterval((function(){r()}),3e4),function(){clearInterval(e)}}),[]),Object(l.useEffect)((function(){r(),window.addEventListener("resize",(function(){a&&a.resize()}))}),[a]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"leftItem item-alarmType",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{children:"\u62a5\u8b66\u5206\u7c7b"})}),Object(s.jsx)("div",{className:"itembody",id:"alarmType"})]})})})}function Ze(){var e=Object(l.useState)(null),t=Object(p.a)(e,2),a=t[0],c=t[1],n=Object(l.useState)(null),i=Object(p.a)(n,2),r=i[0],o=i[1],d=Object(l.useContext)(at).clientid,j=L(0,0,1);function u(){null!==r&&Y({alarmType:0,clientIds:r,startTime:j.startTime,endTime:j.endTime,userId:0}).then((function(e){var t=[],c=[];if(!e||200!==e.data.code||""===e.data.data||0===e.data.data.length)return w.a.init(document.querySelector("#alarmSort")).dispose(),void Je("alarmSort");e.data.data.forEach((function(e){var a={};c.push(e.alarmKey),a.name=e.alarmKey,a.value=e.alarmCount,t.push(a)})),function(e,t){if(a){var c={legend:{type:"scroll",orient:"vertical",talign:"left",right:0,data:e,itemWidth:10,itemHeight:10,icon:"circle",top:0,width:0,pageIconColor:"#fff",pageIconInactiveColor:"#f5f5f5",pageTextStyle:{color:"#fff"},textStyle:{color:"#fff",width:0,overflow:"truncate",ellipsis:"...",fontSize:11}},color:["#f5b5ae ","#7fa2d5","#2c73b7","#bd84b3","#fe5492","#fececb","#A0522D","#EEE8AA","#FFA500","#f6c022","#7b97ad","#eceda2","#f5b5ae","#ccedbc","#657798","#6059f7","#563672","#d3d2f0","#cfb3f7","#9b84f3","#c59148","#ed1263","#52d8da","#b1f5f0","#20c6f5","#20c6f5","#1e91e2","#4a6ec1","#b6dbff","#a1a8e5","#b091c3","#8e6499","#c6c675","#d2d2a8","#b075d1","#a9aaaa","#e66795","#af28ef","#ff00ff","#e6ba82","#264a8a","#74cbed","#4176e2","#bbf5dd","#d0d6e0","#e96c5b","#f6c022","#4283ee","#44e7f6","#fae3a1","#0a1bae","#ee0591","#254451","#7766a4","#3586d6","#d4902f","#2c73b7","#afc8fa","#e66795","#a1a8e5","#a0a1a1","#f43c54","#6699ff","#6565fe","#665251","#ffff6a","#52cea4","#cc5226","#3e5b9a"],series:[{type:"pie",center:[Pe,"center"],radius:He,avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"rgba(0,0,0,0.3)",borderWidth:1},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:t}]};a.setOption(c)}}(c,t)}))}return Object(l.useEffect)((function(){var e,t;return c(w.a.init(document.getElementById("alarmSort"))),(t={clientid:d},U({url:"/video/datashow/public/ams/list/clientids",method:"post",params:t})).then((function(e){e&&"0000"===e.data.code&&""!==e.data.data?o(e.data.data):Je("alarmSort")})).catch((function(e){console.error(e),Je("alarmSort")})),e=setInterval((function(){r&&u()}),1e4),function(){clearInterval(e)}}),[]),Object(l.useEffect)((function(){r&&u()}),[r]),Object(l.useEffect)((function(){window.addEventListener("resize",(function(){a&&a.resize()}))}),[a]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"leftItem item-alarmSort",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{children:"\u4e3b\u52a8\u5b89\u5168\u62a5\u8b66"})}),Object(s.jsx)("div",{className:"itembody",id:"alarmSort"})]})})})}function Xe(){var e=Object(l.useContext)(at).clientid,t=Object(l.useState)([]),a=Object(p.a)(t,2),c=a[0],n=a[1],i=Object(l.useState)(null),r=Object(p.a)(i,2),o=r[0],d=r[1];function j(){var t;void 0!==e&&(t={clientid:e},U({url:"/video/datashow/public/ams/vehicle/alarm/top10",method:"post",params:t})).then((function(e){if(e&&"0000"===e.data.code&&""!==e.data.data&&0!==e.data.data.length){e.data.data.forEach((function(e,t){e.key=e.vehicle_id,e.ranknum=t+1})),n(e.data.data);var t=document.querySelector("#rankTop").offsetHeight,a=document.querySelector("#rankTop").querySelector(".ant-table-tbody").offsetHeight;d(a+23>t?t-23:null)}else Je("rankTop")})).catch((function(e){console.error(e),Je("rankTop")}))}return Object(l.useEffect)((function(){var e;return window.addEventListener("resize",(function(){var e=document.querySelector("#rankTop").offsetHeight,t=document.querySelector("#rankTop").querySelector(".ant-table-tbody").offsetHeight;d(t+23>e?e-23:null)})),j(),e=setInterval((function(){j()}),1e4),function(){clearInterval(e)}}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"leftItem ranks",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{children:"\u62a5\u8b66\u8f66\u8f86top10"})}),Object(s.jsx)("div",{className:"itembody table-rank",id:"rankTop",children:Object(s.jsx)(I.a,{locale:{emptyText:"\u52a0\u8f7d\u4e2d"},columns:[{key:"ranknum",title:"\u6392\u540d",dataIndex:"ranknum",width:60,align:"center"},{key:"vehicle_name",title:"\u8f66\u724c\u53f7\u7801",dataIndex:"vehicle_name",ellipsis:!0},{key:"count",title:"\u62a5\u8b66\u6b21\u6570",dataIndex:"count",width:80}],dataSource:c,pagination:!1,scroll:{y:o}})})]})})})}function $e(){var e=Object(l.useContext)(at).clientid,t=Object(l.useState)(null),a=Object(p.a)(t,2),c=a[0],n=a[1],i=Object(l.useState)(0),r=Object(p.a)(i,2),o=r[0],d=r[1],j=Object(l.useState)("month"),u=Object(p.a)(j,2),h=u[0],m=u[1];function b(t){var a=t||h;void 0!==e&&(0===o||1===o?"month"===a?Q:Z:"month"===a?X:$)({clientid:e,acc:0===o||2===o?1:2}).then((function(e){if(e&&"0000"===e.data.code&&""!==e.data.data&&""!==e.data.data.categories&&0!==e.data.data.categories.length&&""!==e.data.data.series&&0!==e.data.data.series.length){var t=e.data.data,n=t.categories,i=t.series,s=[];n.forEach((function(e){var t=e.substr(2).split("");t.splice(2,0,"/"),"month"!==a&&t.splice(5,0,"/");var c=t.join(",").replace(/,/g,"");s.push(c)})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null!==c){c.clear();var a={tooltip:{trigger:"axis"},grid:{containLabel:!0,left:15,top:20,right:15,bottom:5},color:["#2cd9c5"],xAxis:{type:"category",data:e,splitLine:{show:!0,lineStyle:{color:"#192028"}},axisLine:{lineStyle:{color:"#192028"}},axisLabel:{color:"#666"},axisTick:{alignWithLabel:!0,inside:!0}},yAxis:[{type:"value",min:50,position:"left",nameTextStyle:{color:"#999999",align:"center",fontSize:12},splitLine:{show:!0,lineStyle:{color:"#192028"}},axisLine:{lineStyle:{color:"#192028"}},axisLabel:{color:"#999999"},axisTick:{alignWithLabel:!0,inside:!0}}],series:[{type:"line",data:t,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(44,217,197,0.3)"},{offset:1,color:"rgba(3,23,33,0.3)"}],global:!1}}}]};c.setOption(a)}}(s,i[0].data)}else Je("alarmLine")})).catch((function(e){console.error(e),Je("alarmLine")}))}return Object(l.useEffect)((function(){n(w.a.init(document.querySelector("#alarmLine")));var e;return e=setInterval((function(){d((function(e){return e+1}))}),15e3),function(){clearInterval(e)}}),[]),Object(l.useEffect)((function(){b(),window.addEventListener("resize",(function(){c&&c.resize()}))}),[c]),Object(l.useEffect)((function(){o>3?m("month"===h?"day":"month"):b()}),[o]),Object(l.useEffect)((function(){o>3&&d(0)}),[h]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"midPanel",children:Object(s.jsx)("div",{className:"midChart",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsxs)("div",{className:"itemTitle",children:[Object(s.jsx)("span",{children:"\u62a5\u8b66\u8d8b\u52bf\u7edf\u8ba1"}),Object(s.jsx)("div",{className:"itemTitle-btn",children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:0===o?"active":"",onClick:function(){d(0),b()},children:"ADAS\u62a5\u8b66"}),Object(s.jsx)("li",{className:1===o?"active":"",onClick:function(){d(1)},children:"DSM\u62a5\u8b66"}),Object(s.jsx)("li",{className:2===o?"active":"",onClick:function(){d(2)},children:"\u7ec8\u7aef\u62a5\u8b66"}),Object(s.jsx)("li",{className:3===o?"active":"",onClick:function(){d(3)},children:"\u5e73\u53f0\u62a5\u8b66"})]})}),Object(s.jsx)("div",{className:"itemTitle-btn itemTitle-btn-date",children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:"month"===h?"active":"",onClick:function(){m("month"),b("month")},children:"\u6309\u6708"}),Object(s.jsx)("li",{className:"day"===h?"active":"",onClick:function(){m("day"),b("day")},children:"\u6309\u65e5"})]})})]}),Object(s.jsx)("div",{className:"itembody",id:"alarmLine"})]})})})})}function et(e){var t=e.adasState,a=Object(l.useContext)(at).clientid;function c(e){var t;void 0!==a&&(t={clientid:a},U({url:"/video/datashow/public/map/position",method:"post",params:t})).then((function(t){t&&0!==t.data.data.length&&N.a.load(["ui/misc/PointSimplifier","lib/$"],(function(a,c){a.supportCanvas?(new a({map:e,zIndex:99,getPosition:function(e){return e?e.lnglat:null},renderOptions:{pointStyle:{width:6,height:6}}}).setData(t.data.data),e.setZoom(Be),e.setCenter([108.939621,34.343147]),e.panBy(Ue[0],Ue[1])):alert("\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 Canvas\uff01")}))}))}function n(e){if(Me.length>50){var t=Me.slice(50);Me=Me.slice(0,50),t.forEach((function(t){e.remove(t)}))}}function i(e,c){var i;void 0!==a&&(i={clientId:a,userId:0,interval:c},U({url:"/report/adas/queryWindowAlarms",method:"post",data:i})).then((function(a){if(a&&200===a.data.code&&""!==a.data.data&&(0!==a.data.data.length||Re)){if(null===ze){var c=a.data.data;ze=[];var i=c[0].customAarmCode;c.forEach((function(e,t){e.vedioNames.length>0&&e.customAarmCode!==i&&ze.push(e)})),ze.length>4&&(ze=ze.slice(0,4))}var s;if(null===Re)Re=a.data.data.length>50?a.data.data.slice(0,50):a.data.data;else(s=Re).unshift.apply(s,Object(b.a)(a.data.data)),Re.length>50&&(Re=Re.slice(0,50));var l=a.data.data;Me.length>0&&l.length>0&&Me.forEach((function(e){e.setIcon("../../images/marker.gif"),e.setzIndex(100)})),l.length>0&&l.forEach((function(t,a){if(0===a){var c=new g.a.Marker({icon:"../../images/markers.gif",zIndex:101,position:[t.gpslng,t.gpslat]}),i='\n                            <div style="border:2px solid #F00;box-shadow:0px 0px 10px rgba(0,0,0,0.3);background:rgba(0,0,0,0.3)">\n                                <div style="max-width:250px;background:#f5f5f5;color:#333;overflow:hidden;padding:3px 10px;font-weight:bold;white-space:nowrap;text-overflow:ellipsis"><span>'.concat(t.vehicleName,"</span>&nbsp;&nbsp;<span>").concat(t.alarmInfo,"\uff08").concat(t.alarmLevelInfo,'\uff09</span></div>\n                                <div style="width:250px;height:150px;">\n                                <img width="100%" height="100%" src=').concat(t.fileUrlPrefix).concat(t.imgNames[0],">\n                                </div>\n                            </div>\n                            ");new g.a.InfoWindow({map:e,isCustom:!0,content:i,position:[t.gpslng,t.gpslat]});c.setMap(e),Me.unshift(c),n(e)}else{var s=new g.a.Marker({position:[t.gpslng,t.gpslat],icon:"../../images/marker.gif"});s.setMap(e),Me.unshift(s),n(e)}})),t(a.data.data)}}))}return Object(l.useEffect)((function(){var e,t=new g.a.Map("alarmMap",{resizeEnable:!0,zoom:De,mapStyle:"amap://styles/grey"});return c(t),i(t,1e3),e=setInterval((function(){i(t,10)}),1e4),function(){clearInterval(e)}}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{id:"alarmMap",className:"mapContainer"})})}function tt(e){var t=Object(l.useState)(),a=Object(p.a)(t,2),c=a[0],n=a[1],i=Object(l.useState)(1),r=Object(p.a)(i,2),o=r[0],d=r[1],j=Object(l.useState)(),u=Object(p.a)(j,2),h=u[0],m=u[1],f=e.data;function O(e){return e.vedioNames.length>0?Object(s.jsx)("video",{className:"adasVideo",src:e.fileUrlPrefix+e.vedioNames[0],muted:"muted",loop:"loop",autoPlay:"autoplay"}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("span",{className:"no-video",children:"NO\xa0\xa0VIDEO"})})}return Object(l.useEffect)((function(){!function(){var e,t=[];if(ze&&f&&f.length>0&&(1===o?d((function(e){return e+1})):(f.forEach((function(e,t){ze.forEach((function(t,a){t.customAarmCode===e.customAarmCode&&ze.splice(a,1)}))})),(e=ze).unshift.apply(e,Object(b.a)(f)))),!ze||0===ze.length){for(var a=0;a<4;a++)t.push(a);return m(t),void n(ze)}ze=ze.slice(0,4);for(var c=0;c<4-ze.length;c++)t.push(c);m(t),n(ze)}()}),[f]),c?Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"rightWrap",children:[c.map((function(e,t){return Object(s.jsx)("div",{className:"rightItem",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsxs)("span",{children:[Object(s.jsxs)("span",{children:[e.vehicleName,"\xa0",e.alarmInfo,"(",e.alarmLevelInfo,")"]}),Object(s.jsx)("span",{children:e.startTime})]})}),Object(s.jsx)("div",{className:"itembody",children:O(e)})]})},t.toString())})),h&&h.length>0&&h.map((function(e,t){return Object(s.jsx)("div",{className:"rightItem",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{})}),Object(s.jsx)("div",{className:"itembody"})]})},t.toString())}))]})}):Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"rightWrap",children:[Object(s.jsx)("div",{className:"rightItem",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{})}),Object(s.jsx)("div",{className:"itembody"})]})}),Object(s.jsx)("div",{className:"rightItem",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{})}),Object(s.jsx)("div",{className:"itembody"})]})}),Object(s.jsx)("div",{className:"rightItem",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{})}),Object(s.jsx)("div",{className:"itembody"})]})}),Object(s.jsx)("div",{className:"rightItem",children:Object(s.jsxs)("div",{className:"itemWrap",children:[Object(s.jsx)("div",{className:"itemTitle",children:Object(s.jsx)("span",{})}),Object(s.jsx)("div",{className:"itembody"})]})})]})})}Ge<=1366&&(Pe="22%",He=["50%","75%"],Ue=[0,0],Be=4,De=4),1366<Ge<=1600&&(Pe="22%",He=["50%","75%"],Ue=[0,0],Be=4,De=5),1600<Ge&&(Pe="28%",He=["35%","55%"],Ue=[0,0],Be=5,De=5);var at=Object(l.createContext)();var ct=Object(m.b)()((function(){var e=Object(l.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],n=Object(l.useState)(null),i=Object(p.a)(n,2),r=i[0],o=i[1];return Object(l.useEffect)((function(){window.addEventListener("resize",(function(){null!==(document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)===!0?document.querySelector("#fullbtn").style.display="none":document.querySelector("#fullbtn").style.display=""}))}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"homepage",id:"fullpage",children:[Object(s.jsx)(We.a,{id:"fullbtn",onClick:function(){var e;(e=document.querySelector("#fullpage")).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},type:"primary",style:{position:"absolute",zIndex:500,right:10,top:10},shape:"circle",icon:Object(s.jsx)(_e.a,{})}),Object(s.jsxs)(at.Provider,{value:{clientid:Ve("id")},children:[Object(s.jsx)(et,{adasState:function(e){var t=[];if(o(e[0]),e.forEach((function(e,a){e.vedioNames.length>0&&t.push(e)})),t.length>0){var a=t[0].customAarmCode,n=[];t.forEach((function(e){var t=e.alarmLevelInfo.slice(0,e.alarmLevelInfo.length-2);e.alarmLevelInfo=t,e.customAarmCode!==a&&n.push(e)})),n=n.length>4?n.slice(0,4):t,c(n)}else c([])}}),Object(s.jsx)("div",{className:"alarmTitle",children:"\u8f66\u8054\u7f51\u7efc\u5408\u670d\u52a1\u5e73\u53f0\u62a5\u8b66\u76d1\u63a7\u770b\u677f"}),Object(s.jsx)(Ye,{pos:r}),Object(s.jsxs)("div",{className:"leftPanel",children:[Object(s.jsx)(Ke,{}),Object(s.jsx)(Qe,{}),Object(s.jsx)(Ze,{}),Object(s.jsx)(Xe,{})]}),Object(s.jsx)($e,{}),Object(s.jsx)("div",{className:"rightPanel",children:Object(s.jsx)(tt,{data:a})})]})]})})})),nt=a(1092),it=a(107),st=a.n(it);function lt(e){var t=e.date,a=Object(l.useState)(),c=Object(p.a)(a,2),n=c[0],i=c[1];return Object(l.useEffect)((function(){(function(e){return U({url:"/rubbish/HomeController/clearanceandtransportation",method:"post",params:e})})({applicationtime:t}).then((function(e){"0000"===e.data.code&&(0===e.data.data.length?i([]):(e.data.data.forEach((function(e,t){e.key=t})),i(e.data.data)))})).catch((function(e){i([]),console.error(e)}))}),[t]),Object(s.jsx)(I.a,{dataSource:n,columns:[{title:"\u5730\u533a",dataIndex:"regionname",key:"regionname"},{title:"\u7533\u62a5\u901a\u8fc7\u6b21\u6570",dataIndex:"pass",key:"pass"},{title:"\u6d89\u53ca\u8f66\u8f86\u6570",dataIndex:"shejicar",key:"shejicar"},{title:"\u5ba1\u6838\u901a\u8fc7\u6d89\u53ca\u5de5\u5730\u6570",dataIndex:"passshejigongdi",key:"passshejigongdi"},{title:"\u5916\u8fd0\u571f\u65b9\u91cf",dataIndex:"dump",key:"dump"},{title:"\u56de\u586b\u571f\u65b9\u91cf",dataIndex:"backfill",key:"backfill"},{title:"\u6e05\u8fd0\u4f01\u4e1a\u6570",dataIndex:"enterprise",key:"enterprise"},{title:"\u6e05\u8fd0\u8f66\u8f86\u6570",dataIndex:"cleancar",key:"cleancar"},{title:"\u6d88\u7eb3\u573a\u6570",dataIndex:"accommodation",key:"accommodation"}],pagination:!1,bordered:!0})}var rt=[{path:"/homeNormal",component:fe},{path:"/homeAdas",component:Fe},{path:"/homeAlarm",component:ct},{path:"/cleanhome",component:Object(m.b)()((function(){var e=Object(l.useState)({accommodation:"-",construction:"-",enterprise:"-",enterprisered:"-",enterpriseyellow:"-",vehicle:"-"}),t=Object(p.a)(e,2),a=t[0],c=t[1],n=Object(l.useState)({accommodation:"-",adopt:"-",backfill:"-",clean:"-",declarationfailed:"-",declarationpassed:"-",declaretoday:"-",dump:"-",enterprise:"-",waitingdeclaration:"-"}),i=Object(p.a)(n,2),r=i[0],o=i[1],d=Object(l.useState)(),j=Object(p.a)(d,2),u=j[0],h=j[1],m=Object(l.useState)(L(0,0,0).startTime),b=Object(p.a)(m,2),f=b[0],O=b[1],x="YYYY-MM-DD";return Object(l.useEffect)((function(){(new g.a.CitySearch).getLocalCity((function(e,t){if("complete"===e&&"OK"===t.info){if(t&&t.city&&t.bounds){var a=t.city;h(a)}}else h(t.info)})),U({url:"/rubbish/HomeController/basicinformationquery",method:"post"}).then((function(e){"0000"===e.data.code&&null!==e.data.data&&void 0!==e.data.data&&c(e.data.data)})).catch((function(e){c({accommodation:"-",construction:"-",enterprise:"-",enterprisered:"-",enterpriseyellow:"-",vehicle:"-"}),console.error(e)})),U({url:"/rubbish/HomeController/declarationinformationquery",method:"post"}).then((function(e){"0000"===e.data.code&&null!==e.data.data&&void 0!==e.data.data&&o(e.data.data)})).catch((function(e){o({accommodation:"-",adopt:"-",backfill:"-",clean:"-",declarationfailed:"-",declarationpassed:"-",declaretoday:"-",dump:"-",enterprise:"-",waitingdeclaration:"-"}),console.error(e)}))}),[]),Object(s.jsxs)("div",{className:"homepage",style:{padding:"10px",overflow:"auto"},children:[Object(s.jsxs)("div",{className:"clean-home-block",children:[Object(s.jsxs)("div",{className:"clean-home-title",children:[Object(s.jsx)("span",{children:"\u57fa\u7840\u4fe1\u606f\u6570\u636e"}),Object(s.jsxs)("div",{className:"clean-time-gps",children:[Object(s.jsx)("span",{}),Object(s.jsx)("span",{children:u}),"\xa0"]})]}),Object(s.jsxs)("div",{className:"clean-home-content",children:[Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#ebf6fd"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-1",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u9879\u76ee\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:a.construction})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#e9f8f4"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-2",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u4f01\u4e1a\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:a.enterprise})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#f0f8ec"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-3",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u6d88\u7eb3\u573a/\u56de\u586b\u5de5\u5730(\u4e2a)"}),Object(s.jsx)("span",{children:a.accommodation})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#fcf2f4"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-4",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u7ea2\u7801\u4f01\u4e1a\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:a.enterprisered})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#fdf6ea"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-5",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u9ec4\u7801\u4f01\u4e1a\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:a.enterpriseyellow})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#f7f7ff"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-6",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u8f66\u8f86\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:a.vehicle})]})]})})})]})]}),Object(s.jsxs)("div",{className:"clean-home-block",children:[Object(s.jsx)("div",{className:"clean-home-title",children:Object(s.jsx)("span",{children:"\u7533\u62a5\u4fe1\u606f\u6570\u636e"})}),Object(s.jsxs)("div",{className:"clean-home-content",children:[Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#e9f8f4"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-7",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u4eca\u65e5\u7533\u62a5\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:r.declaretoday})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#edfbfd"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-8",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u7533\u62a5\u901a\u8fc7\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:r.declarationpassed})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#fffcef"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-9",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u7533\u62a5\u672a\u901a\u8fc7\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:r.declarationfailed})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#f5fef2"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-10",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u56de\u586b\u571f\u65b9\u91cf(\u65b9)"}),Object(s.jsx)("span",{children:r.backfill})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#f7f7ff"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-11",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u5916\u8fd0\u571f\u65b9\u91cf(\u65b9)"}),Object(s.jsx)("span",{children:r.dump})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#f0f8ec"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-12",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u5f85\u5ba1\u6279\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:r.waitingdeclaration})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#e9f8f4"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-13",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u4eca\u65e5\u5ba1\u6279\u901a\u8fc7\u8f66\u8f86\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:r.adopt})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#ebf6fd"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-14",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u4eca\u65e5\u6e05\u8fd0\u8f66\u8f86\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:r.clean})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#e9f8f4"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-15",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u4eca\u65e5\u5ba1\u6279\u53c2\u4e0e\u4f01\u4e1a\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:r.enterprise})]})]})})}),Object(s.jsx)("div",{className:"clean-home-list",children:Object(s.jsx)("div",{style:{background:"#fdf6ea"},children:Object(s.jsxs)("div",{className:"clean-home-list-wrap",children:[Object(s.jsx)("span",{className:"clean-home-icon clean-home-icon-16",children:Object(s.jsx)("i",{})}),Object(s.jsxs)("div",{className:"clean-home-sum",children:[Object(s.jsx)("span",{children:"\u4eca\u65e5\u5ba1\u6279\u53c2\u4e0e\u6d88\u7eb3\u573a\u6570(\u4e2a)"}),Object(s.jsx)("span",{children:r.accommodation})]})]})})})]})]}),Object(s.jsxs)("div",{className:"clean-home-block",children:[Object(s.jsxs)("div",{className:"clean-home-title",children:[Object(s.jsx)("span",{children:"\u6e05\u8fd0\u7533\u62a5\u7edf\u8ba1"}),Object(s.jsx)(nt.a,{style:{background:"#eaf0f5",border:"none",borderRadius:"10px",marginLeft:"8px"},allowClear:!1,defaultValue:st()(f,x),format:x,onChange:function(e,t){O(t)},suffixIcon:Object(s.jsx)("div",{className:"clean-date-icon"})})]}),Object(s.jsx)("div",{className:"clean-home-content",children:Object(s.jsx)(lt,{date:f})})]})]})}))}];function ot(e){var t=e.component,a=Object(O.a)(e,["component"]),c=Object(f.a)({},a),n=c.path,i=c.arr,l=Object(x.e)();return i.includes(n)?Object(s.jsx)(x.a,{render:function(e){return Object(s.jsx)("div",{style:{visibility:n===l.pathname?"":"hidden"},children:Object(s.jsx)(t,Object(f.a)({},e))})}}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(x.a,{path:n,render:function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(t,Object(f.a)({},e))})}})})}var dt=Object(m.b)()((function(){var e=Object(x.e)(),t=Object(l.useState)([]),a=Object(p.a)(t,2),c=a[0],n=a[1],i=Object(m.d)((function(e){return e.homeReducer.route}));return Object(l.useEffect)((function(){if(!c.includes(e.pathname)){var t=Object(b.a)(c);t.push(e.pathname),n(t)}}),[e.pathname]),Object(l.useEffect)((function(){if(i&&c.includes(i)){var e=Object(b.a)(c);e.splice(c.indexOf(i),1),n(e)}}),[i]),Object(s.jsx)(s.Fragment,{children:rt.map((function(e){return Object(s.jsx)(ot,{path:e.path,component:e.component,arr:c},e.path)}))})}));var jt=Object(m.b)()((function(){return Object(s.jsx)(j.a,{locale:h.a,children:Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(d.a,{basename:window.__POWERED_BY_QIANKUN__?"/":"/microApp/home/",children:Object(s.jsx)(dt,{})})})})})),ut=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1094)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),i(e),s(e)}))};a(860),a(909);function ht(e){var t=e.container;o.a.render(Object(s.jsx)(m.a,{store:R,children:Object(s.jsx)(jt,{})}),t?t.querySelector("#root"):document.querySelector("#root"))}function mt(e){R.dispatch({type:"globalState",value:e.setGlobalState}),e.onGlobalStateChange((function(e,t){R.dispatch({type:"token",value:e.token}),R.dispatch({type:"route",value:e.route}),R.dispatch({type:"userId",value:e.userId}),R.dispatch({type:"urlRecord",value:e.urlRecord}),R.dispatch({type:"homeMoudle",value:e.homeMoudle})}),!0)}function bt(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mt(t),ht(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e){return vt.apply(this,arguments)}function vt(){return(vt=Object(i.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.container,o.a.unmountComponentAtNode(a?a.querySelector("#root"):document.querySelector("#root"));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.__POWERED_BY_QIANKUN__||ht({}),ut()},179:function(e,t){e.exports=a},507:function(e,t,a){window.__POWERED_BY_QIANKUN__&&(a.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)},696:function(e,t,a){},74:function(t,a){t.exports=e},89:function(e,a){e.exports=t}},[[1088,1,2]]])}));